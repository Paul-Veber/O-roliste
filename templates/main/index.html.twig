{% extends 'base.html.twig' %}

{% block title %}O'Roliste
{% endblock %}

{% block body %}

	<h1>Bienvenue sur O'Roliste</h1>

	<div class="card-group mb-5">

		<div class="card h-100 mx-1">
			<div class="card-body">

				<h4>Dernières parties publiés</h4>

				{% for gameFive in gamesFive %}
					<div class="mt-2">
						<div class="fw-bold text-capitalize">{{ gameFive.name }}</div>

						<img src="{{ asset(images_directory ~ '/' ~ gameFive.image) }}" class="rounded-circle img-thumbnail" width="100" alt="Illustration de {{gameFive.name}}">
						<p class="card-text text-truncate">{{ gameFive.description}}</p>
						<div>nombre de joueurs max .
							{{ gameFive.maxPlayer}}</div>
						<div>
							<a href="{{path('game_read',{'id': gameFive.id}) }}">
								<button class="btn btn-danger" type="button">Afficher plus de détails</button>
							</a>
						</div>
					</div>
				{% endfor %}

				<div class="d-grid gap-2 col-6 mx-auto">
					<a href="{{path('game_browse') }}">
						<button class="btn btn-danger" type="button">Voir toutes les parties</button>
					</a>
				</div>
			</div>

		</div>

		<div class="card h-100 mx-1">
			<div class="card-body">

				<h4>Nouveaux joueurs disponibles</h4>

				{% for userFive in usersFive %}
					<div class='mt-2'>
						<div class="fw-bold text-capitalize">{{ userFive.username}}</div>
						<div><img src="{{ asset(images_directory ~ '/' ~ userFive.avatar) }}" class="rounded-circle img-thumbnail" width="100" alt="avatar de {{userFive.username}}"></div>
						<p class="card-text text-truncate">{{ userFive.description}}
						</p>
						<div>
							<a href="{{path('user_read',{'id': userFive.id}) }}">
								<button class="btn btn-danger" type="button">Afficher plus de détails</button>
							</a>

							{% if is_granted('FRIEND_ADD', userFive) %}
								<form action="{{ path('friend_add', {id: userFive.id}) }}" method="post" class="d-inline">

									<button class="btn btn-danger btn-sm">Ajouter en ami</button>

									<input type="hidden" name="_method" value="add">
									<input type="hidden" name="_token" value="{{ csrf_token('addFriend') }}">
								</form>
							{% endif %}

						</div>
					</div>

				{% endfor %}
				<div class="d-grid gap-2 col-6 mx-auto">
					<a href="{{path('user_browse') }}">
						<button class="btn btn-danger" type="button">Voir toutes les joueurs</button>
					</a>
				</div>
			</div>
		</div>
	</div>

{% endblock %}
